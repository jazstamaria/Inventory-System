<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOLLIBEE</title>
       <!-- CSS only -->
<link 
href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" 
rel="stylesheet" 
integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" 
crossorigin="anonymous"
/>
<!-- animate css -->
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
/>
<!-- style css -->
<link rel="stylesheet" href="style.css">
</head>
<body class="">
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <img src="image/logo.svg" alt="" width="50" height="40" class="d-inline-block align-text-top">
          <a class="navbar-brand" href="#">JOLLIBEE</a>
            <form class="d-flex">
                    <div class="shopping">
                        <img src="image/shopping.svg" width="20px" height="20px">
                        <span class="quantity">0</span>
                    </div>
            </button>
            </form>
          </div>
        </div>
      </nav>

          <form class="orderform">
              <div class="row-centered">
                  <label for="NameC">Name of Customer:</label>
                  <br>
                  <input type="text" id="NameC" name="StudNo" />
              </div>
              <br>
              <div class="row-centered">
                  <label for="Or1">Order:</label>
                  <br>
                  <input type="text" id="Or1" name="FirstN" />
              </div>

              <div class="row-centered">
                  <label for="Q1">Quantity:</label>
                  <br>
                  <input type="number" id="Q1" min="1" value="1">
              </div>
              <br>
              <div class="row-centered">
                  <label for="Or2">Order:</label></dt>
                  <br>
                  <input type="text" id="Or2" name="LastN" />
              </div>

              <div class="row-centered">
                  <label for="Q2">Quantity:</label></dt>
                  <br>
                  <input type="number" id="Q2" min="1" value="1">
              </div>
              <br>
              <div class="row-centered">
                  <label for="Or3">Order:</label>
                  <br>
                  <input type="text" id="Or3" name="address" />
              </div>

              <div class="row-centered">
                  <label for="Q3">Quantity:</label>
                  <br>
                  <input type="number" id="Q3" min="1" value="1">
              </div>
              <br>
              <div class="row-centered">
                  <label for="Or4">Order:</label>
                  <br>
                  <input type="text" id="Or4" name="address" />
              </div>

              <div class="row-centered">
                  <label for="Q4">Quantity:</label>
                  <br>
                  <input type="number" id="Q4" min="1" value="1">
              </div>
          </form>
<br>
          <div class="checkOut">
            <button type="button" class="btn" id="Insbtn">Check Out Order</button>
            <button type="button" class="btn" id="Selbtn">Review Order</button>
            <button type="button" class="btn" id="Updbtn">Update Order</button>
            <button type="button" class="btn" id="Delbtn">Delete Order</button>
            <br>
            <br>
            <button type="button" class="btnone" id="Nextbtn">View Orders</button>

        </div>

    <div class="container">
        
       

        <div class="list">
          
        </div>
    </div>


    <div class="card">
        <h1>My Cart</h1>
        <ul class="listCard">
        </ul>
        <div class="checkOut">
            <div class="total">0</div>
            <div class="closeShopping">Close</div>
        </div>
    </div>

    <script src="app.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
        </script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyDDIbqahw0IYa8besc8X7D2Bw39kRXLiT0",
    authDomain: "jollibee-orders.firebaseapp.com",
    projectId: "jollibee-orders",
    storageBucket: "jollibee-orders.appspot.com",
    messagingSenderId: "221510007708",
    appId: "1:221510007708:web:8bc1e530ca26ec14052659",
    measurementId: "G-3X6C7XTG0C"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        import { getDatabase, ref, set, child, update, remove, get }
            from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js"

        const db = getDatabase();
        // references

        var nameC = document.getElementById("NameC");
        var or1 = document.getElementById("Or1");
        var q1 = document.getElementById('Q1');
        var or2 = document.getElementById("Or2");
        var q2 = document.getElementById('Q2');
        var or3 = document.getElementById("Or3");
        var q3 = document.getElementById('Q3');
        var or4 = document.getElementById("Or4");
        var q4 = document.getElementById('Q4');

        var insbtn = document.getElementById("Insbtn");
        var selbtn = document.getElementById("Selbtn");
        var updbtn = document.getElementById("Updbtn");
        var delbtn = document.getElementById("Delbtn");
        var Nextbtn = document.getElementById("Nextbtn");
    Nextbtn.addEventListener("click", function() {
      window.location.href = 'orders.html';
    });

        // add data function

        function InsertData() {
            set(ref(db, "Customer/" + nameC.value), {
                NameC: nameC.value,
                Or1: or1.value,
                Q1: q1.value,
                Or2: or2.value,
                Q2: q2.value,
                Or3: or3.value,
                Q3: q3.value,
                Or4: or4.value,
                Q4: q4.value,
            })
                .then(() => {
                    alert("We have received your order!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }
        //Select data function//

        function SelectData() {
            const dbref = ref(db);

            get(child(dbref, "Customer/" + NameC.value)).then((snapshot) => {
                if (snapshot.exists()) {
                    nameC.value = snapshot.val().NameC;
                    or1.value = snapshot.val().Or1;
                    q1.value = snapshot.val().Q1;
                    or2.value = snapshot.val().Or2;
                    q2.value = snapshot.val().Q2;
                    or3.value = snapshot.val().Or3;
                    q3.value = snapshot.val().Q3;
                    or4.value = snapshot.val().Or4;
                    q4.value = snapshot.val().Q4;
                } else {
                    alert("No order found!");
                }
            })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }

        // update date function ??

        function UpdateData() {
            update(ref(db, "Customer/" + nameC.value), {
                NameC: nameC.value,
                Or1: or1.value,
                Q1: q1.value,
                Or2: or2.value,
                Q2: q2.value,
                Or3: or3.value,
                Q3: q3.value,
                Or4: or4.value,
                Q4: q4.value,
            })
                .then(() => {
                    alert("Order updated successfully!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }

        // Delete Function

        function DeleteData() {
            remove(ref(db, "Customer/" + NameC.value))
                .then(() => {
                    alert("Order removed successfully!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }
        //Assign events to buttons

        Insbtn.addEventListener("click", InsertData);
        Selbtn.addEventListener("click", SelectData);
        Updbtn.addEventListener("click", UpdateData);
        Delbtn.addEventListener("click", DeleteData);
    </script>

</body>

</html>